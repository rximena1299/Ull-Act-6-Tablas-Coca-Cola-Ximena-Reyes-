{% extends 'base.html' %}
{% block content %}
  <div class="container mt-4">
    <h3>Actualizar Producto</h3>
    <form method="POST">
      {% csrf_token %}
      <div class="mb-3">
        <label class="form-label">Nombre del producto</label>
        <input type="text" name="nombre_producto" value="{{ producto.nombre_producto }}" class="form-control">
      </div>

      <div class="mb-3">
        <label class="form-label">Categoría</label>
        <input type="text" name="categoria" value="{{ producto.categoria }}" class="form-control">
      </div>

      <div class="mb-3">
        <label class="form-label">Precio unitario</label>
        <input type="number" step="0.01" name="precio_unitario" value="{{ producto.precio_unitario }}" class="form-control">
      </div>

      <div class="mb-3">
        <label class="form-label">Stock actual</label>
        <input type="number" name="stock_actual" value="{{ producto.stock_actual }}" class="form-control">
      </div>

      <div class="mb-3">
        <label class="form-label">Fecha de fabricación</label>
        <input type="date" name="fecha_fabricacion" value="{{ producto.fecha_fabricacion|date:'Y-m-d' }}" class="form-control">
      </div>

      <div class="mb-3">
        <label class="form-label">Fecha de vencimiento</label>
        <input type="date" name="fecha_vencimiento" value="{{ producto.fecha_vencimiento|date:'Y-m-d' }}" class="form-control">
      </div>

      <div class="mb-3">
        <label class="form-label">Cliente</label>
        <select name="cliente" class="form-select">
          {% for c in clientes %}
          <option value="{{ c.id }}" {% if c.id == producto.cliente.id %}selected{% endif %}>
            {{ c.nombre }} {{ c.apellido }}
          </option>
          {% endfor %}
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Proveedor</label>
        <select name="proveedor" class="form-select">
          {% for p in proveedores %}
          <option value="{{ p.id }}" {% if p.id == producto.proveedor.id %}selected{% endif %}>
            {{ p.nombre_empresa }}
          </option>
          {% endfor %}
        </select>
      </div>

      <button type="submit" class="btn btn-success">Guardar cambios</button>
      <a href="{% url 'ver_producto' %}" class="btn btn-secondary">Cancelar</a>
    </form>
  </div>
{% endblock %}
